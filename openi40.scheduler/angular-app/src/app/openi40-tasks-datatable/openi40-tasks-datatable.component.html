<div class="card">
<p-table #dt [value]="data" [(selection)]="selectedTasks" dataKey="id" styleClass="p-datatable-customers" [rowHover]="true"
        [rows]="30" [showCurrentPageReport]="true" [rowsPerPageOptions]="[10,25,50]" [loading]="loading"
        [paginator]="true" currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
        [filterDelay]="0"  selectionMode="single" >

        <ng-template pTemplate="header">
            <tr >
                <th style="width: 3rem"></th>
                <th pSortableColumn="code">code <p-sortIcon field="code"></p-sortIcon></th>
                <th pSortableColumn="description">description <p-sortIcon field="description"></p-sortIcon></th>
                <th pSortableColumn="workOrderCode">work order<p-sortIcon field="workOrderCode"></p-sortIcon></th>
                <th pSortableColumn="sequenceCode">sequence <p-sortIcon field="sequenceCode"></p-sortIcon></th>
                <th pSortableColumn="workCenterCode">work center <p-sortIcon field="workCenterCode"></p-sortIcon></th>
                <th pSortableColumn="scheduledMachineCode">machine <p-sortIcon field="scheduledMachineCode"></p-sortIcon></th>
                <th pSortableColumn="setupStartDateTime">setup start <p-sortIcon field="setupStartDateTime"></p-sortIcon></th>
                <th pSortableColumn="setupEndDateTime">setup end <p-sortIcon field="setupEndDateTime"></p-sortIcon></th>
                <th pSortableColumn="workStartDateTime">work start <p-sortIcon field="workStartDateTime"></p-sortIcon></th>
                <th pSortableColumn="workStartDateTime">work end <p-sortIcon field="workStartDateTime"></p-sortIcon></th>
                <th style="width: 8rem"></th>
            </tr>

        </ng-template>
        <ng-template pTemplate="body" let-task>
            <tr class="p-selectable-row {{(task.successfullyScheduled?'task-ok':'task-ko')}}" (click)="onClicked(task)">
                <td>

                </td>
                <td>

                    {{task.code}}
                </td>
                <td>

                  {{task.description}}
              </td>
                <td>

                    {{task.workOrderCode}}
                </td>
                <td>

                    {{task.sequenceCode}}
                </td>
                <td>

                    {{task.workCenterCode}}
                </td>
                <td>

                    {{task.scheduledMachineCode}}
                </td>
                <td>

                  {{task.setupStartDateTime | date: 'short'}}
                </td>
                <td>

                  {{task.setupEndDateTime | date: 'short'}}
                </td>
                <td>

                  {{task.workStartDateTime | date: 'short'}}
                </td>
                <td>

                  {{task.workEndDateTime | date: 'short'}}
                </td>
                <td style="text-align: center">

                </td>
            </tr>
        </ng-template>
        <ng-template pTemplate="emptymessage">
            <tr>
                <td colspan="8">No tasks with warning/errors.</td>
            </tr>
        </ng-template>
    </p-table>
  </div>
  <openi40-task-details [task]="selectedItem.data" [apsData]="apsData" *ngIf="
  selectedItem!=null" (close)="selectedItem=null">
  </openi40-task-details>
